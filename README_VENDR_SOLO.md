# üöÄ Vendr SaaS - Sistema Completo de Gest√£o de Vendas

> Plataforma SaaS completa com modo Empresa e modo Aut√¥nomo (Vendr Solo)

## üìã √çndice

- [Sobre o Projeto](#sobre-o-projeto)
- [Tecnologias](#tecnologias)
- [Instala√ß√£o](#instala√ß√£o)
- [Configura√ß√£o](#configura√ß√£o)
- [Funcionalidades](#funcionalidades)
- [Estrutura do Projeto](#estrutura-do-projeto)
- [Modo Solo](#modo-solo)
- [API Endpoints](#api-endpoints)
- [Deploy](#deploy)

---

## üéØ Sobre o Projeto

Vendr √© um SaaS de gest√£o de vendas externas que oferece dois modos de opera√ß√£o:

1. **Modo Empresa** - Para empresas com equipe de vendedores
2. **Modo Solo** - Para trabalhadores aut√¥nomos (one-person business)

### Caracter√≠sticas Principais

‚úÖ **UI/UX Moderna** - Design profissional com anima√ß√µes Framer Motion  
‚úÖ **Dark Mode** - Tema escuro completo  
‚úÖ **Freemium** - Plano gratuito com upgrade para Pro  
‚úÖ **Sistema de Cotas** - Limite de 30 vendas/m√™s no Solo Free  
‚úÖ **Exporta√ß√µes** - PDF e CSV  
‚úÖ **WhatsApp** - Bot√£o flutuante de suporte  
‚úÖ **Responsivo** - Mobile-first design  

---

## üõ†Ô∏è Tecnologias

### Frontend
- **Next.js 14** - App Router
- **TypeScript** - Type safety
- **Tailwind CSS** - Styling
- **shadcn/ui** - Componentes UI
- **Framer Motion** - Anima√ß√µes
- **Recharts** - Gr√°ficos
- **jsPDF** - Exporta√ß√£o PDF

### Backend
- **Supabase** - Auth + Database + RLS
- **PostgreSQL** - Banco de dados
- **Zod** - Valida√ß√£o de schemas

### DevOps
- **Vercel** - Deploy autom√°tico
- **Git** - Controle de vers√£o

---

## üì¶ Instala√ß√£o

### Pr√©-requisitos

- Node.js 18+
- npm ou yarn
- Conta Supabase

### Passo a Passo

```bash
# 1. Clonar reposit√≥rio
git clone <seu-repo>
cd vendr-project

# 2. Instalar depend√™ncias
npm install

# 3. Configurar vari√°veis de ambiente
cp .env.example .env.local

# 4. Editar .env.local com suas credenciais Supabase
NEXT_PUBLIC_SUPABASE_URL=sua-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=sua-chave

# 5. Rodar o projeto
npm run dev
```

Acesse: `http://localhost:3000`

---

## ‚öôÔ∏è Configura√ß√£o

### 1. Configurar Banco de Dados

Execute o SQL no Supabase SQL Editor:

```sql
-- Executar os seguintes arquivos na ordem:
1. supabase-migrations-v2-fixed.sql  (migrations principais)
2. supabase-solo-migration.sql       (migrations do Solo)
```

### 2. Configurar RLS (Row Level Security)

As pol√≠ticas RLS s√£o criadas automaticamente pelas migrations.

### 3. Testar Autentica√ß√£o

```bash
# Login teste
Email: seu-email@teste.com
Senha: senha123
```

---

## ‚ú® Funcionalidades

### Modo Empresa

#### 1. Dashboard
- KPIs animados (vendas, faturamento, ticket m√©dio)
- Gr√°fico de vendas por vendedor
- Alertas inteligentes (estoque baixo, vendedores inativos)
- A√ß√µes r√°pidas

#### 2. Vendedores
- CRUD completo
- Cadastro com email/senha (integrado com Auth)
- Atribui√ß√£o de kits
- Controle de comiss√£o

#### 3. Produtos
- CRUD completo
- Gest√£o de estoque
- Movimenta√ß√µes (entrada/sa√≠da)
- Alertas de estoque baixo

#### 4. Vendas
- Registro de vendas por vendedor
- Filtros por data e m√©todo de pagamento
- Exporta√ß√£o PDF/CSV

### Modo Solo (Aut√¥nomo)

#### 1. Dashboard Solo
- KPIs personalizados
- Badge de cota (X/30 vendas)
- A√ß√µes r√°pidas
- Gr√°ficos simplificados

#### 2. Nova Venda
- Grid de produtos com +/-
- Sele√ß√£o de m√©todo (PIX/Cart√£o/Dinheiro)
- Valida√ß√£o de estoque
- **Bloqueio autom√°tico** ao atingir 30 vendas (Solo Free)

#### 3. Estoque
- CRUD de produtos
- Controle de estoque
- KPIs (produtos ativos, valor total)

#### 4. Financeiro
- Resumo por m√©todo de pagamento
- Filtros (hoje/semana/m√™s)
- Gr√°ficos de distribui√ß√£o
- Exporta√ß√£o CSV

#### 5. Assinatura
- Compara√ß√£o Solo Free vs Solo Pro
- Upgrade com um clique
- FAQ integrado

---

## üìÅ Estrutura do Projeto

```
vendr-project/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ solo/              # APIs do modo Solo
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ vendas/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ cotas/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ stats/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ upgrade/
‚îÇ   ‚îú‚îÄ‚îÄ solo/                  # P√°ginas do modo Solo
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx           # Dashboard
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ venda-nova/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vendas/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ estoque/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ financeiro/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ assinatura/
‚îÇ   ‚îú‚îÄ‚îÄ onboarding/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ solo/              # Onboarding aut√¥nomo
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/             # Dashboard empresa
‚îÇ   ‚îú‚îÄ‚îÄ vendedores/            # CRUD vendedores
‚îÇ   ‚îú‚îÄ‚îÄ produtos/              # CRUD produtos
‚îÇ   ‚îî‚îÄ‚îÄ login/                 # Login com 3 abas
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ModernTopBar.tsx       # TopBar azul
‚îÇ   ‚îú‚îÄ‚îÄ WhatsAppFloat.tsx      # Bot√£o WhatsApp
‚îÇ   ‚îú‚îÄ‚îÄ SoloPlanBadge.tsx      # Badge de cota
‚îÇ   ‚îú‚îÄ‚îÄ ExportButtons.tsx      # Export PDF/CSV
‚îÇ   ‚îî‚îÄ‚îÄ ...                    # Outros componentes
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ solo-helpers.ts        # Fun√ß√µes helper Solo
‚îÇ   ‚îî‚îÄ‚îÄ solo-schemas.ts        # Schemas Zod
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îî‚îÄ‚îÄ solo.ts                # Tipos TypeScript
‚îú‚îÄ‚îÄ supabase-solo-migration.sql
‚îî‚îÄ‚îÄ README_VENDR_SOLO.md
```

---

## üéØ Modo Solo - Detalhes

### Sistema de Cotas

#### Solo Free
- **Limite:** 30 vendas/m√™s
- **Bloqueio:** Autom√°tico ao atingir limite
- **Reset:** Autom√°tico no pr√≥ximo m√™s
- **Pre√ßo:** Gr√°tis

#### Solo Pro
- **Limite:** Ilimitado
- **Recursos extras:** 
  - Exporta√ß√µes PDF/CSV
  - Relat√≥rios avan√ßados
  - Gr√°ficos detalhados
  - Suporte priorit√°rio
- **Pre√ßo:** R$ 29,90/m√™s

### Fluxo de Uso

```
1. Cadastro ‚Üí /onboarding/solo
   ‚Üì
2. Dashboard ‚Üí /solo
   ‚Üì
3. Adicionar Produtos ‚Üí /solo/estoque
   ‚Üì
4. Registrar Vendas ‚Üí /solo/venda-nova
   ‚Üì
5. [Ao atingir 30 vendas] ‚Üí Bloqueio com CTA
   ‚Üì
6. Upgrade ‚Üí /solo/assinatura
   ‚Üì
7. Vendas Ilimitadas ‚úì
```

### Valida√ß√µes

- ‚úÖ Estoque suficiente antes de vender
- ‚úÖ Cota dispon√≠vel antes de vender
- ‚úÖ Decrementar estoque ap√≥s venda
- ‚úÖ Incrementar cota ap√≥s venda
- ‚úÖ Bloquear se `vendas_mes >= 30` (Solo Free)

---

## üîå API Endpoints

### Solo APIs

#### POST /api/solo/vendas
Criar nova venda com valida√ß√£o de cota.

**Request:**
```json
{
  "itens": [
    { "produto_id": "uuid", "qtd": 2 }
  ],
  "metodo_pagamento": "pix"
}
```

**Response (Success):**
```json
{
  "success": true,
  "vendas": [...],
  "valor_total": 50.00
}
```

**Response (Limite Atingido):**
```json
{
  "error": "Limite atingido",
  "upgrade_required": true
}
```

#### GET /api/solo/vendas
Listar vendas com filtros.

**Query Params:**
- `data_inicio` - Data in√≠cio (YYYY-MM-DD)
- `data_fim` - Data fim (YYYY-MM-DD)
- `metodo_pagamento` - pix|cartao|dinheiro

#### GET /api/solo/cotas
Obter cota atual do m√™s.

**Response:**
```json
{
  "ano_mes": "2025-01",
  "vendas_mes": 15,
  "limite": 30,
  "plano": "solo_free",
  "limite_atingido": false
}
```

#### GET /api/solo/stats
Estat√≠sticas do dashboard.

**Response:**
```json
{
  "vendasHoje": 5,
  "lucroEstimado": 250.50,
  "produtosAtivos": 12,
  "estoqueTotal": 450
}
```

#### POST /api/solo/upgrade
Fazer upgrade para Solo Pro.

**Request:**
```json
{
  "plano": "solo_pro"
}
```

---

## üé® Design System

### Cores

```css
/* Prim√°ria */
--brand-primary: #0057FF;  /* Azul Vendr */
--brand-accent: #FF6B00;   /* Laranja */

/* Backgrounds */
--background: #F8F9FB;
--card: #FFFFFF;

/* Text */
--text-primary: #121212;
--text-secondary: #6B7280;

/* Status */
--success: #16A34A;
--warning: #F59E0B;
--error: #DC2626;
```

### Componentes Reutiliz√°veis

- **ModernTopBar** - Barra de navega√ß√£o
- **Breadcrumbs** - Navega√ß√£o contextual
- **StatusBadge** - Badges coloridos
- **LoadingSkeleton** - Skeleton loading
- **ExportButtons** - Exporta√ß√£o de dados

---

## üöÄ Deploy

### Vercel (Recomendado)

```bash
# 1. Conectar reposit√≥rio na Vercel
vercel

# 2. Configurar vari√°veis de ambiente
NEXT_PUBLIC_SUPABASE_URL=...
NEXT_PUBLIC_SUPABASE_ANON_KEY=...

# 3. Deploy autom√°tico a cada push
git push origin main
```

### Outras Plataformas

- **Railway** - Deploy com PostgreSQL
- **Render** - Deploy gratuito
- **AWS** - Para produ√ß√£o em escala

---

## üìä Banco de Dados

### Tabelas Principais

| Tabela | Fun√ß√£o |
|--------|--------|
| `empresas` | Dados das empresas (+ is_solo, plano) |
| `perfis` | Perfis de usu√°rios (role: owner/seller) |
| `vendedores` | Vendedores da empresa |
| `produtos` | Cat√°logo de produtos |
| `vendas` | Registro de vendas |
| `solo_cotas` | Controle de cotas mensais Solo |

### RLS (Row Level Security)

Todas as tabelas t√™m pol√≠ticas RLS baseadas em `empresa_id`:

```sql
-- Exemplo: Vendas
CREATE POLICY "Users can view their company sales"
  ON vendas FOR SELECT
  USING (empresa_id IN (
    SELECT empresa_id FROM perfis WHERE user_id = auth.uid()
  ));
```

---

## üß™ Testes

### Testar Modo Solo

1. **Cadastro:**
   - Ir para `/login` ‚Üí aba "Aut√¥nomo"
   - Criar conta com email/senha
   - Verificar redirect para `/solo`

2. **Adicionar Produtos:**
   - Ir para `/solo/estoque`
   - Adicionar 3 produtos de teste

3. **Registrar Vendas:**
   - Ir para `/solo/venda-nova`
   - Registrar 29 vendas ‚Üí OK
   - Registrar 30¬™ venda ‚Üí OK
   - Tentar 31¬™ ‚Üí **BLOQUEADO** ‚úì

4. **Upgrade:**
   - Ir para `/solo/assinatura`
   - Clicar em "Fazer Upgrade"
   - Verificar plano mudou para Pro
   - Tentar nova venda ‚Üí **SEM LIMITE** ‚úì

### Testar Cadastro Vendedor

1. Login como empresa
2. Ir para `/vendedores`
3. Criar vendedor com email/senha
4. Fazer logout
5. Login com credenciais do vendedor ‚úì

---

## üìù Vari√°veis de Ambiente

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGc...

# WhatsApp (opcional)
NEXT_PUBLIC_WHATSAPP_NUMBER=5513981401945

# Ambiente
NODE_ENV=production
```

---

## ü§ù Contribuindo

1. Fork o projeto
2. Crie uma branch (`git checkout -b feature/nova-feature`)
3. Commit suas mudan√ßas (`git commit -m 'feat: adicionar nova feature'`)
4. Push para a branch (`git push origin feature/nova-feature`)
5. Abra um Pull Request

---

## üìÑ Licen√ßa

Este projeto est√° sob a licen√ßa MIT.

---

## üìû Suporte

- **WhatsApp:** +55 13 98140-1945
- **Email:** suporte@vendr.com.br
- **Documenta√ß√£o:** [docs.vendr.com.br](https://docs.vendr.com.br)

---

## üéâ Cr√©ditos

Desenvolvido com ‚ù§Ô∏è por [Seu Nome]

**Stack:** Next.js 14 + TypeScript + Supabase + Tailwind CSS

---

**üöÄ Vendr - Gest√£o de Vendas Simples e Poderosa**
